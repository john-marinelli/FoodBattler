[gd_scene load_steps=18 format=2]

[ext_resource path="res://Assets/GeneralTheme.tres" type="Theme" id=1]
[ext_resource path="res://Assets/UI/pg_bar_over.png" type="Texture" id=2]
[ext_resource path="res://Assets/UI/pg_bar_under.png" type="Texture" id=3]
[ext_resource path="res://Assets/UI/pg_bar_prog.png" type="Texture" id=4]
[ext_resource path="res://Assets/Foods/05_apple_pie.png" type="Texture" id=5]
[ext_resource path="res://Assets/Foods/01_dish.png" type="Texture" id=6]
[ext_resource path="res://BattleSystem/BattleScene.gd" type="Script" id=7]
[ext_resource path="res://BattleSystem/scripts/ui_actionMenu.gd" type="Script" id=8]
[ext_resource path="res://Assets/UI/continueArrow.png" type="Texture" id=9]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;
uniform float move_speed = 2.0;
float calculateVertex(float speed) {
	return abs(sin(TIME * speed));
}
void vertex() {
	vec2 old_vertex = VERTEX;
	float spriteWidth = abs(VERTEX.x);
	float x = calculateVertex(move_speed) * 0.2;
	float y = calculateVertex(move_speed/2.0);
	VERTEX += vec2(0.0,y);
}
"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/move_speed = 2.0

[sub_resource type="Shader" id=5]
code = "shader_type canvas_item;
uniform float move_speed = 1.0;
float calculateVertex(float speed) {
	return abs(sin(TIME * speed)) * 2.0;
}
void vertex() {
	float x = 0.0;
	float y = calculateVertex(move_speed);
	VERTEX += vec2(x,y);
}
"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 5 )
shader_param/move_speed = 0.823

[sub_resource type="StyleBoxFlat" id=6]
bg_color = Color( 0.945098, 0.960784, 0.960784, 1 )
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color( 0, 0, 0, 1 )
anti_aliasing = false

[sub_resource type="AtlasTexture" id=7]
atlas = ExtResource( 9 )
region = Rect2( 0, 0, 5, 5 )

[sub_resource type="AtlasTexture" id=8]
atlas = ExtResource( 9 )
region = Rect2( 5, 0, 5, 5 )

[sub_resource type="SpriteFrames" id=9]
animations = [ {
"frames": [ SubResource( 7 ), SubResource( 8 ) ],
"loop": true,
"name": "anim",
"speed": 5.0
} ]

[node name="BattleScene" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 1 )
script = ExtResource( 7 )

[node name="bg" type="Panel" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 1 )

[node name="battleWindow" type="Control" parent="."]
margin_left = 8.0
margin_top = 8.0
margin_right = 312.0
margin_bottom = 176.0

[node name="enemy" type="TextureRect" parent="battleWindow"]
self_modulate = Color( 1, 1, 1, 0.301961 )
material = SubResource( 2 )
margin_left = 224.0
margin_top = 24.0
margin_right = 256.0
margin_bottom = 40.0
texture = ExtResource( 6 )
expand = true

[node name="Sprite" type="Sprite" parent="battleWindow/enemy"]
material = SubResource( 4 )
position = Vector2( 16, 0 )
texture = ExtResource( 5 )

[node name="player" type="TextureRect" parent="battleWindow"]
self_modulate = Color( 1, 1, 1, 0.301961 )
material = SubResource( 2 )
margin_left = 40.0
margin_top = 80.0
margin_right = 96.0
margin_bottom = 112.0
texture = ExtResource( 6 )
expand = true

[node name="Sprite" type="Sprite" parent="battleWindow/player"]
material = SubResource( 4 )
position = Vector2( 32, 0 )
scale = Vector2( 1.5, 1.5 )
texture = ExtResource( 5 )

[node name="battleUI" type="VBoxContainer" parent="battleWindow"]
margin_right = 304.0
margin_bottom = 160.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="monsterInfoContainer" type="Control" parent="battleWindow/battleUI"]
margin_right = 304.0
margin_bottom = 100.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="enemyInfo" type="MarginContainer" parent="battleWindow/battleUI/monsterInfoContainer"]
margin_right = 120.0
margin_bottom = 40.0

[node name="VBoxContainer" type="VBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo"]
margin_right = 120.0
margin_bottom = 40.0

[node name="nameContainer" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer"]
margin_right = 120.0
margin_bottom = 8.0

[node name="Name" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/nameContainer"]
margin_right = 45.0
margin_bottom = 8.0
text = "Apple Pie"

[node name="buffContainer" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/nameContainer"]
margin_left = 49.0
margin_right = 120.0
margin_bottom = 8.0
size_flags_horizontal = 3

[node name="HBoxContainer" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer"]
margin_top = 12.0
margin_right = 120.0
margin_bottom = 20.0

[node name="Label" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/HBoxContainer"]
margin_right = 10.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "HP"
align = 1
valign = 2

[node name="hpProg" type="TextureProgress" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/HBoxContainer"]
margin_left = 14.0
margin_right = 91.0
margin_bottom = 8.0
size_flags_horizontal = 3
size_flags_vertical = 3
value = 50.0
texture_under = ExtResource( 3 )
texture_over = ExtResource( 2 )
texture_progress = ExtResource( 4 )
tint_progress = Color( 0.270588, 0.815686, 0.313726, 1 )
nine_patch_stretch = true
stretch_margin_left = 2
stretch_margin_top = 2
stretch_margin_right = 2
stretch_margin_bottom = 2

[node name="hpValue" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/HBoxContainer"]
margin_left = 95.0
margin_right = 120.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "0/100"
align = 2
valign = 2

[node name="HBoxContainer2" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer"]
margin_top = 24.0
margin_right = 120.0
margin_bottom = 32.0

[node name="Label" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/HBoxContainer2"]
margin_right = 10.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "MP"
align = 1
valign = 2

[node name="mpProg" type="TextureProgress" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/HBoxContainer2"]
margin_left = 14.0
margin_right = 91.0
margin_bottom = 8.0
size_flags_horizontal = 3
size_flags_vertical = 3
value = 50.0
texture_under = ExtResource( 3 )
texture_over = ExtResource( 2 )
texture_progress = ExtResource( 4 )
tint_progress = Color( 0.270588, 0.776471, 0.815686, 1 )
nine_patch_stretch = true
stretch_margin_left = 2
stretch_margin_top = 2
stretch_margin_right = 2
stretch_margin_bottom = 2

[node name="mpValue" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/enemyInfo/VBoxContainer/HBoxContainer2"]
margin_left = 95.0
margin_right = 120.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "0/100"
align = 2
valign = 2

[node name="playerInfo" type="MarginContainer" parent="battleWindow/battleUI/monsterInfoContainer"]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -120.0
margin_top = -48.0

[node name="VBoxContainer" type="VBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo"]
margin_right = 120.0
margin_bottom = 48.0

[node name="nameContainer" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer"]
margin_right = 120.0
margin_bottom = 8.0

[node name="Name" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/nameContainer"]
margin_right = 45.0
margin_bottom = 8.0
text = "Apple Pie"

[node name="buffContainer" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/nameContainer"]
margin_left = 49.0
margin_right = 120.0
margin_bottom = 8.0
size_flags_horizontal = 3

[node name="HBoxContainer" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer"]
margin_top = 12.0
margin_right = 120.0
margin_bottom = 20.0

[node name="Label" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/HBoxContainer"]
margin_right = 10.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "HP"
align = 1
valign = 2

[node name="hpProg" type="TextureProgress" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/HBoxContainer"]
margin_left = 14.0
margin_right = 91.0
margin_bottom = 8.0
size_flags_horizontal = 3
size_flags_vertical = 3
value = 50.0
texture_under = ExtResource( 3 )
texture_over = ExtResource( 2 )
texture_progress = ExtResource( 4 )
tint_progress = Color( 0.270588, 0.815686, 0.313726, 1 )
nine_patch_stretch = true
stretch_margin_left = 2
stretch_margin_top = 2
stretch_margin_right = 2
stretch_margin_bottom = 2

[node name="hpValue" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/HBoxContainer"]
margin_left = 95.0
margin_right = 120.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "0/100"
align = 2
valign = 2

[node name="HBoxContainer2" type="HBoxContainer" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer"]
margin_top = 24.0
margin_right = 120.0
margin_bottom = 32.0

[node name="Label" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/HBoxContainer2"]
margin_right = 10.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "MP"
align = 1
valign = 2

[node name="mpProg" type="TextureProgress" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/HBoxContainer2"]
margin_left = 14.0
margin_right = 91.0
margin_bottom = 8.0
size_flags_horizontal = 3
size_flags_vertical = 3
value = 50.0
texture_under = ExtResource( 3 )
texture_over = ExtResource( 2 )
texture_progress = ExtResource( 4 )
tint_progress = Color( 0.270588, 0.776471, 0.815686, 1 )
nine_patch_stretch = true
stretch_margin_left = 2
stretch_margin_top = 2
stretch_margin_right = 2
stretch_margin_bottom = 2

[node name="mpValue" type="Label" parent="battleWindow/battleUI/monsterInfoContainer/playerInfo/VBoxContainer/HBoxContainer2"]
margin_left = 95.0
margin_right = 120.0
margin_bottom = 8.0
size_flags_vertical = 3
text = "0/100"
align = 2
valign = 2

[node name="actionMenuContainer" type="Control" parent="battleWindow/battleUI"]
margin_top = 104.0
margin_right = 304.0
margin_bottom = 160.0
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.55

[node name="actionMenu" type="PanelContainer" parent="battleWindow/battleUI/actionMenuContainer"]
margin_right = 304.0
margin_bottom = 56.0
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource( 8 )

[node name="HBoxContainer" type="HBoxContainer" parent="battleWindow/battleUI/actionMenuContainer/actionMenu"]
margin_left = 2.0
margin_top = 3.0
margin_right = 302.0
margin_bottom = 52.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="InfoText" type="Label" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer"]
margin_right = 148.0
margin_bottom = 49.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_styles/normal = SubResource( 6 )
text = "What will you do?"
align = 1
valign = 1

[node name="arrow" type="AnimatedSprite" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer"]
position = Vector2( 284, 36 )
frames = SubResource( 9 )
animation = "anim"
frame = 1
speed_scale = 0.6
playing = true

[node name="menuContainer" type="PanelContainer" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer"]
self_modulate = Color( 1, 1, 1, 0 )
margin_left = 152.0
margin_right = 300.0
margin_bottom = 49.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="optionGrid" type="GridContainer" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer/menuContainer"]
margin_left = 2.0
margin_top = 3.0
margin_right = 146.0
margin_bottom = 45.0
size_flags_horizontal = 3
size_flags_vertical = 3
columns = 2

[node name="Button" type="Button" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer/menuContainer/optionGrid"]
margin_right = 70.0
margin_bottom = 19.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Fight"

[node name="Button2" type="Button" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer/menuContainer/optionGrid"]
margin_left = 74.0
margin_right = 144.0
margin_bottom = 19.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Bag"

[node name="Button3" type="Button" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer/menuContainer/optionGrid"]
margin_top = 23.0
margin_right = 70.0
margin_bottom = 42.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Foods"

[node name="Button4" type="Button" parent="battleWindow/battleUI/actionMenuContainer/actionMenu/HBoxContainer/menuContainer/optionGrid"]
margin_left = 74.0
margin_top = 23.0
margin_right = 144.0
margin_bottom = 42.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Run"

[node name="Tween" type="Tween" parent="battleWindow/battleUI/actionMenuContainer/actionMenu"]

[node name="NinePatchRect" type="NinePatchRect" parent="."]
margin_right = 40.0
margin_bottom = 40.0

[node name="Tween" type="Tween" parent="."]
